help:
  main: |
    **ğŸ¤– Construct Help**
    Use: .command _args_

    **ğŸ“‚ Project**
    * new [name]: Reset/create project
    * project [path]: Set project directory
    * list: List projects
    * task [desc]: Start a new task
    * modify [desc]: Modify current task
    * start: Start/resume tasks
    * stop: Stop tasks

    **ğŸ™ Git**
    * changes
    * commit [msg]
    * discard

    **ğŸ”¨ Build**
    * check
    * build
    * deploy

    **âš¡ Misc**
    * , [cmd]: Terminal command
    * agents: list agents
    * agent [id]: set agent
    * models: list models
    * model [id]: set model
    * ask [msg]: Chat with agent
    * set [k] [v]
    * read [files]
    * status

wizard:
  project_name: "**ğŸš€ New Project Wizard**\n\nPlease enter a **Project Folder Name** (no spaces, e.g., `my-cool-app`):"
  project_type: "**ğŸ“‚ Project Type**\n\n1. Application\n2. Library\n3. CLI Tool\n4. Web Site/App\n\nReply with number or name."
  stack: "**ğŸ› ï¸ Tech Stack**\n\n1. Rust\n2. Python\n3. TypeScript\n4. Go\n\nReply with number or type custom."
  description: "**ğŸ“ Description**\n\nDescribe your project features and requirements. You can send multiple messages.\n\nType `.ok` when finished."
  task_description: "**ğŸ“‹ New Task Wizard**\n\nEnter requirements as separate messages (each will be a bullet point).\n\nType `.ok` when finished."
  confirmation_task: "**âœ… Confirm Task**\n\n**Requirements**:\n{}\n\nType `.ok` to start task."
  confirmation_project: "**âœ… Review Project**\n\n**Name**: {}\n**Type**: {}\n**Stack**: {}\n**Description**: {} chars\n\nType `.ok` to generate plan."
  cancelled: "âŒ Wizard cancelled."
  invalid_selection: "âŒ Invalid selection. Please select 1-4."
  type_ok_or_cancel: "Type .ok to generate or .cancel to abort."

prompts:
  system: |
    # Construct System Prompt

    You are an AI Coding Agent acting as a cooperative collaborator over Matrix.
    Your goal is to execute code changes to fulfill the user's Task.

    ## Rules
    - Be concise and technical.
    - Always verify your changes if possible (build/test).
    - Do not make assumptions; ask for clarification if a task is ambiguous.
    - Maintain a `tasks.md` file in the project root to track progress. Mark tasks as `[x]` when completed.
    - Maintain a `walkthrough.md` file to document changes and verification results.
    - **ERROR HANDLING**: If a command fails (Exit Code != 0), DO NOT retry it blindly.
      - Do NOT put "WRITE_FILE:" inside the code block. It must be on the line BEFORE the block.
    - Start the tool output immediately.
      - If unclear, ask the user for help.
    - **VERIFICATION**: Don't trust; verify.
      - After running a command that generates files, run `ls` or `cat` to confirm existence.
      - Only proceed if expected artifacts are present.
      - Only proceed if expected artifacts are present.

    ## Best Practices
    - **Debugging**: Follow a structured approach: Assess (Context) -> Reproduce (Steps) -> Fix (Minimal) -> Verify (Test).
    - **Rust Standards**:
      - Avoid anti-patterns: `clone()` (borrow instead), `unwrap()` (handle errors), `unsafe` (avoid).
      - Treat lints seriously; trace root causes before suppressing.
    - **Verification**: Run `cargo check` and `cargo test` after every change.
    - **Completeness**: Do not rely on assumptions. Verify every step.
    - **Command Line Best Practices**:
      - NO INTERACTIVE TOOLS: DO NOT use `nano`, `vim`, `vi`, `less`, `more`, `top`.
      - Use `WRITE_FILE` to create/edit files.
      - Use `READ_FILE` to read files (safer than cat).
      - Use `LIST_DIR` to list files (cleaner than ls).
      - Use `CHANGE_DIR` to change the working directory (persists across commands).
      - Use `grep` to search.
    - **Dependency Management**: ALWAYS use package managers (e.g., `cargo add`, `npm install`, `pip install`) instead of manually editing configuration files (e.g., `Cargo.toml`, `package.json`).

  task_instructions: |
    1. Use the 'Project Roadmap' above for understanding the big picture and constraints.
    2. Your scope is STRICTLY limited to the 'Task' described above. Do NOT try to complete other roadmap items.
    3. Generate two files:
       - `plan.md`: A detailed but CONCISE technical plan for THIS specific task.
       - `tasks.md`: A checklist of the subtasks for THIS specific task.

  task_format: |
    plan.md
    ```markdown
    ...content...
    ```

    tasks.md
    ```markdown
    ...content...
    ```

  new_project_instructions: |
    4. **NEW PROJECT DETECTED**: You MUST also generate `roadmap.md` based on the task requirements to replace the default placeholders.

  new_project_format: |

    roadmap.md
    ```markdown
    ...content...
    ```

  modify_plan: |
    {SYSTEM}

    Original Task: {TASK}

    Current Plan:
    {PLAN}

    Feedback: {FEEDBACK}

    Please update the plan.md based on the feedback.

    IMPORTANT: Return the content of plan.md in a code block.

  task_requirements_prompt: "Task Requirements:\n\n{}"
  new_project_prompt: "Create a new project named '{NAME}'. \n\nGoal: Comprehensive implementation of the following requirements.\n\nRequirements:\n{REQUIREMENTS}\n\nIMPORTANT: The project directory is ALREADY created. You are ALREADY inside it (`{WORKDIR}`). Do NOT run `mkdir` or `cd`."

  initial_history_context: |
    Task: {TASK}

    Current Plan:
    {PLAN}

    Tasks Checklist:
    {TASKS}

    You are executing this plan. We will do this step-by-step.

    You are currently in directory: {WORKDIR}

  agent_history_entry: "\n\nAgent: {}\n\nSystem Command Output: {}"

  interactive_turn: |
    {CWD}

    # Project Context
    ## Roadmap
    {ROADMAP}

    ## Tasks
    {TASKS}

    # Current Status
    Based on the plan and previous outputs, what is the NEXT single command to run?

    ## RULES
    1. Check if `tasks.md` needs to be updated (mark completed items with `[x]`). If so, WRITE IT FIRST.
    2. Check if `walkthrough.md` needs to be updated with new changes or verification results. If so, WRITE IT.
    3. Return the command in a code block, e.g., ```bash\nls -la\n```.
    4. To create/edit a file, return the content in a code block and place `WRITE_FILE: <filename>` on the line BEFORE the code block.
    5. If you are finished with the entire plan, return a code block with the text `DONE`.
    6. Do not output multiple commands in one turn unless chained with `&&`.
    7. Wait for the result before proceeding.
    8. CRITICAL: Do NOT put commentary or explanations inside the code block. ONLY the command itself. Conversational text belongs outside the code block.
    9. NEVER use interactive tools (`nano`, `vim`, `less`). Use `WRITE_FILE`, `READ_FILE` or `LIST_DIR`.
    10. Do NOT put "WRITE_FILE:" / "READ_FILE:" inside the code block. It must be on the line BEFORE the block.
    11. Use `CHANGE_DIR: <path>` to change directory.

  # Templates
  roadmap_template: "# Roadmap\n\n- [ ] Initial Setup"
  changelog_template: "# Changelog\n\n## 0.1.0\n- Initialized"
  roadmap_context: "\n\n### Project Roadmap (Context Only)\n{}\n"

messages:
  status_header: "**ğŸ“Š System Status**\n\n"
  agent_list_header: "ğŸ•µï¸ Available Agents\n"
  no_agents: "* (No specific agents configured)\n"
  fallback_agent: "* deepai (universal fallback)\n"
  active_room: "\nActive in this room: `{}`"
  model_override: "\nModel Override: `{}`"
  model_set: "âœ… **Model set to**: `{}`"
  model_reset: "âœ… **Model reset to default**."
  invalid_model: "âš ï¸ **Invalid model index or name**."
  no_projects_found: "ğŸ“‚ **No projects found**."
  available_projects_header: "**ğŸ“‚ Available Projects**\n"
  invalid_project_name: "âš ï¸ **Invalid project name**."
  admin_permission_denied: "{} you do not have permission to run terminal commands."
  directory_changed: "ğŸ“‚ **Directory changed**: `{}`"
  access_denied_sandbox: "âŒ Access denied: Path outside the sandbox."
  directory_not_found: "âŒ Directory not found."
  command_no_output: "âœ… (Command executed successfully, no output)"
  provider_error_model_switch: "âš ï¸ Provider Error: {err} \nğŸ”„ Switching model: {from} -> {to}"
  provider_error_agent_switch: "âš ï¸ Provider Error: {err} \nğŸ”„ Switching Agent: {from} -> {to}"
  write_plan_error: "âš ï¸ Failed to write plan.md: {}"
  write_tasks_error: "âš ï¸ Failed to write tasks.md: {}"
  feedback_modification: "ğŸ”„ Modifying plan with feedback: *{FEEDBACK}*"
  failed_modify: "âš ï¸ **Failed to modify plan**:\n{}"
  plan_updated: "ğŸ“œ **Plan Updated**:\n\n{}"
  limit_reached: "âš ï¸ **Limit Reached**: Stopped to prevent infinite loop."
  stop_requested: "ğŸ›‘ **Execution stopped by user.**"
  writing_file: "ğŸ’¾ **Writing File**: `{}`"
  file_written: "âœ… File written successfully."
  write_failed: "âŒ Failed to write file: {}"
  execution_complete: "ğŸ **Execution Complete**\n\n{}{}\n### ğŸ“‹ Result\n{}"
  agent_run_code: "ğŸ¤– **Agent wants to run**:\n```\n{}\n```"
  agent_output: "âœ… **Output**:\n```\n{}\n```"
  agent_says: "ğŸ¤” **Agent says**:\n{}"
  agent_error: "âš ï¸ Agent error: {}"
  stop_request_wait: "ğŸ›‘ **Stop requested**. Waiting for current step to finish..."
  plan_approved: "âœ… Plan approved for: **{}**\nStarting interactive execution..."
  no_task_approve: "âš ï¸ **No task to approve**."
  resuming_execution: "ğŸ”„ **Resuming execution**..."
  no_history_continue: "âš ï¸ **No execution history found to continue**. Start a new task."
  plan_rejected: "âŒ **Plan rejected**. Task cleared."
  please_commit_msg: "âš ï¸ **Please provide a commit message**: `.commit _message_`"
  committed_msg: "ğŸš€ **Committed**:\n{}"
  changes_discarded: "ğŸ§¹ **Changes discarded**."
  checking_msg: "ğŸ” **Checking**..."
  check_result: "ğŸ” **Check Result**:\n{}"
  building_msg: "ğŸ”¨ **Building**..."
  build_result: "ğŸ”¨ **Build Result**:\n{}"
  deploying_msg: "ğŸš€ **Deploying**..."
  deploy_result: "ğŸš€ **Deploy Result**:\n{}"
  code_block_output: "```\n{}\n```"

  # Sandbox / Util
  command_blocked: "Command '{}' is explicitly blocked. Please use a safer alternative (e.g., READ_FILE, LIST_DIR, WRITE_FILE, grep)."
  command_ask: "Command '{}' requires confirmation."
  command_not_allowed: "Command '{}' is not in allowlist."
  command_unknown: "Unknown command '{}' (default policy is ask)."
  command_run_failed: "Failed to run command: {}"
  shell_command_failed: "Failed to run shell command: {}"
  command_approval_request: "âš ï¸ **Command requires confirmation**:\n`{}`\n\nType `.ok` to allow or `.no` to deny/skip."
  command_denied_user: "ğŸš« **Command denied by user**."
  no_pending_command: "âš ï¸ **No pending command to approve/deny**."

  # Agent Errors
  missing_env_var: "Missing env var {}"
  gemini_fetch_failed: "Failed to fetch Gemini models: {}"
  gemini_api_error: "Gemini API Error: {}"
  gemini_parse_error: "Failed to parse Gemini response: {}"
  anthropic_fetch_failed: "Failed to fetch Anthropic models: {}"
  anthropic_api_error: "Anthropic API Error: {}"
  anthropic_parse_error: "Failed to parse Anthropic response: {}"
  deepai_request_failed: "DeepAI Request Failed: {}"
  deepai_api_error: "DeepAI API Error: {}"
  deepai_parse_error: "DeepAI Parse Error: {}"
  unsupported_provider: "Unsupported Unified provider: {}"
  gemini_quota_exceeded: "Out of usage for this model: {} (Rate limit exceeded. Resets in approx. {}h {}m at midnight PT)"
  gemini_api_hint: "{} (Hint: Check if 'Generative Language API' is enabled in Google Cloud Console, and ensure you are using an AI Studio key, not Vertex AI. Model: {})"

  # Deep Scan - Commands.rs
  no_projects_configured: "âš ï¸ No `projects_dir` configured."
  provide_project_name: "âš ï¸ **Please provide a project name**: `.new _name_`"
  project_exists: "ğŸ“‚ **Project already exists**. Switched to: `{}`\nSpecs detected."
  create_dir_failed: "\nâŒ **Failed to create directory** `{PATH}`: {ERR}"
  project_created: "\nğŸ“‚ **Created and set project directory to**: `{}`\nğŸ“„ **Initialized specs**: `roadmap.md`, `changelog.md`"
  use_task_to_start: "\n\nUse `.task` to start a new workflow."
  task_started: "ğŸ“ Task started: **{}**\nGenerating plan..."
  plan_generated: "### Plan\n\n{PLAN}\n\n### Tasks generated.{TASKS}\n"
  plan_generation_failed: "âš ï¸ **Failed to generate plan**:\n{}"
  no_active_task_modify: "âš ï¸ No active task to modify. Use `.task` first."
  current_changes_header: "ğŸ” **Current Changes**:\n```diff\n{}\n```"
  output_truncated: "{}... (truncated)"

logs:
  config_loaded: "Loaded configuration for user: {}"
  login_success: "Logged in successfully!"
  setting_display_name: "Setting display name to: {}"
  set_display_name_fail: "Failed to set display name: {}"
  sync_loop_start: "Starting sync loop..."
  sync_loop_fail: "Sync loop failed: {}"
  shutdown: "Shutting down..."
  shutdown_fail: "Unable to listen for shutdown signal: {}"
  bridge_joining: "Bridge [{}]: Joining room {}..."
  bridge_join_fail: "   Failed to join room {}: {}"
  bridge_join_success: "   Successfully joined room {}."
  invite_received: "ğŸ’Œ Received invite for room {:?}"
  join_invite_fail: "Failed to join room after invite: {}"
  join_invite_success: "âœ… Successfully joined room!"
